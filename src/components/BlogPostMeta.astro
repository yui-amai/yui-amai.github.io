---
import { type LanguageKeys } from '@/i18n/ui'

export interface Props {
  pubDate: string;
  category: string;
  tags: string[];
  lang: LanguageKeys;
}

const { pubDate, category, tags, lang } = Astro.props;

// Format date as yyyy/mm/dd
const formattedDate = new Date(pubDate).toISOString().split('T')[0].replace(/-/g, '/');

// Function to map Japanese category names to English slugs
function getCategorySlug(category: string, lang: LanguageKeys): string {
  if (lang === 'jp') {
    // Japanese to English category mapping
    const categoryMapping: Record<string, string> = {
      "統計学": "statistics",
      "プログラミング": "programming",
      "研究": "research"
    };
    
    return categoryMapping[category] || category.toLowerCase().replace(/\s+/g, '-');
  }
  
  return category.toLowerCase().replace(/\s+/g, '-');
}
---

<div class="mt-12 pt-6 border-t border-gray-200 dark:border-gray-700">
  <div class="flex flex-wrap items-center text-xs text-black/60 dark:text-white/60 gap-x-6 gap-y-2">
    <div class="flex items-center space-x-1">
      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
      </svg>
      <span>{formattedDate}</span>
    </div>
    
    <div class="flex items-center space-x-1">
      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path>
      </svg>
      <a href={`/${lang}/categories/${getCategorySlug(category, lang)}`} class="hover:text-black/80 dark:hover:text-white/80 transition-colors no-underline">
        {category}
      </a>
    </div>
    
    <div class="flex items-center flex-wrap gap-2">
      <svg class="w-3 h-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
      </svg>
      <div class="flex flex-wrap gap-2">
        {tags.map((tag) => (
          <a href={`/${lang}/tags/${tag.toLowerCase()}`} class="hover:text-black/80 dark:hover:text-white/80 transition-colors no-underline">
            #{tag}
          </a>
        ))}
      </div>
    </div>
  </div>
</div>
